<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pay or PSLF? | Medical School Debt Optimizer</title>
  <meta name="description" content="Free calculator comparing PSLF, IDR forgiveness, and refinancing strategies for physicians and medical professionals. Find your optimal student loan repayment path.">
  <meta name="keywords" content="PSLF, medical school debt, student loans, physician finance, loan forgiveness, IDR, refinance, doctor loans">
  <meta property="og:title" content="Pay or PSLF? | Medical School Debt Optimizer">
  <meta property="og:description" content="Compare loan repayment strategies and find your optimal path. Free tool for physicians and medical professionals.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://payorpslf.com">
  <link rel="canonical" href="https://payorpslf.com">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öñÔ∏è</text></svg>">
  <style>
    :root {
      --bg: #fafafa;
      --card: #ffffff;
      --text: #1a1a1a;
      --muted: #666;
      --border: #e0e0e0;
      --accent: #2563eb;
      --accent-light: #dbeafe;
      --success: #16a34a;
      --warning: #ca8a04;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
      max-width: 900px;
      margin: 0 auto;
    }
    
    h1 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      color: var(--muted);
      margin-bottom: 2rem;
    }
    
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .card h2 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    
    label {
      font-size: 0.875rem;
      font-weight: 500;
    }
    
    input, select {
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      font-size: 1rem;
      width: 100%;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-light);
    }
    
    .checkbox-group {
      flex-direction: row;
      align-items: center;
      gap: 0.5rem;
    }
    
    .checkbox-group input {
      width: auto;
    }
    
    button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      width: 100%;
    }
    
    button:hover {
      opacity: 0.9;
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    #results {
      display: none;
    }
    
    #results.visible {
      display: block;
    }
    
    .recommendation-box {
      background: var(--accent-light);
      border: 2px solid var(--accent);
      border-radius: 8px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
    }
    
    .recommendation-box h3 {
      color: var(--accent);
      margin-bottom: 0.5rem;
    }
    
    .confidence {
      display: inline-block;
      padding: 0.125rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .confidence.high { background: #dcfce7; color: var(--success); }
    .confidence.medium { background: #fef3c7; color: var(--warning); }
    .confidence.low { background: #fee2e2; color: #dc2626; }
    
    .reasoning {
      margin-top: 1rem;
      padding-left: 1rem;
      border-left: 3px solid var(--accent);
    }
    
    .reasoning li {
      margin-bottom: 0.25rem;
      color: var(--muted);
      font-size: 0.875rem;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }
    
    th, td {
      text-align: left;
      padding: 0.75rem;
      border-bottom: 1px solid var(--border);
    }
    
    th {
      font-weight: 600;
      color: var(--muted);
    }
    
    tr:hover {
      background: var(--bg);
    }
    
    .best-row {
      background: var(--accent-light) !important;
    }
    
    .money { font-family: 'SF Mono', Monaco, monospace; }
    .money.negative { color: var(--success); }
    
    .risks, .benefits {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.5rem;
    }
    
    .metrics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .metric {
      text-align: center;
    }
    
    .metric-value {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--accent);
    }
    
    .metric-label {
      font-size: 0.75rem;
      color: var(--muted);
    }
    
    .toggle-section {
      border-top: 1px solid var(--border);
      margin-top: 1rem;
      padding-top: 1rem;
    }
    
    .toggle-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      user-select: none;
    }
    
    .toggle-header input {
      width: auto;
    }
    
    .toggle-content {
      display: none;
      margin-top: 1rem;
    }
    
    .toggle-content.visible {
      display: block;
    }
    
    .inline-form {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      line-height: 2.5;
    }
    
    .inline-form input, .inline-form select {
      width: auto;
      display: inline-block;
    }
    
    .inline-form input[type="number"] {
      width: 100px;
    }
    
    .explanation {
      background: var(--bg);
      border-left: 3px solid var(--accent);
      padding: 0.75rem 1rem;
      margin-top: 1rem;
      font-size: 0.875rem;
      color: var(--muted);
    }
    
    .share-button {
      background: var(--bg);
      color: var(--text);
      border: 1px solid var(--border);
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      width: auto;
    }
    
    .share-button:hover {
      background: var(--border);
    }
    
    .footer {
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
      font-size: 0.8rem;
      color: var(--muted);
    }
    
    .footer a {
      color: var(--accent);
      text-decoration: none;
    }
    
    .footer a:hover {
      text-decoration: underline;
    }
    
    .footer-links {
      display: flex;
      gap: 1.5rem;
      margin-bottom: 1rem;
    }
    
    .last-updated {
      font-size: 0.75rem;
    }
    
    .aggressive-results {
      background: #fef3c7;
      border: 2px solid var(--warning);
      border-radius: 8px;
      padding: 1.25rem;
      margin-top: 1rem;
    }
    
    .aggressive-results h4 {
      color: var(--warning);
      margin-bottom: 0.5rem;
    }
    
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .comparison-item {
      text-align: center;
      padding: 1rem;
      background: white;
      border-radius: 6px;
    }
    
    .comparison-item.winner {
      border: 2px solid var(--success);
    }
    
    .comparison-label {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 0.25rem;
    }
    
    .comparison-value {
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    /* Career Path Comparison */
    .path-card {
      text-align: left;
      padding: 1.25rem;
    }

    .path-header {
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 0.25rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid var(--border);
    }

    .path-header.pslf { color: var(--accent); border-color: var(--accent); }
    .path-header.private { color: var(--warning); border-color: var(--warning); }

    .path-subtitle {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 1rem;
    }

    .path-metrics {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .path-metric {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .path-metric-label {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .path-metric-value {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .path-card.winner {
      border: 2px solid var(--success);
      background: #f0fdf4;
    }

    .salary-comparison {
      margin-top: 1.5rem;
      padding: 1.25rem;
      background: #f8fafc;
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .salary-comparison h4 {
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
    }

    .salary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
    }

    .salary-value {
      font-weight: 600;
    }

    .salary-input {
      width: 150px;
      padding: 0.4rem 0.6rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      font-size: 0.9rem;
      text-align: right;
    }

    .breakeven-container {
      margin: 1rem 0;
    }

    .breakeven-bar {
      height: 12px;
      background: #e5e7eb;
      border-radius: 6px;
      position: relative;
      overflow: visible;
    }

    .breakeven-fill {
      height: 100%;
      border-radius: 6px;
      transition: width 0.3s, background 0.3s;
      background: var(--warning);
    }

    .breakeven-marker {
      position: absolute;
      top: -4px;
      width: 2px;
      height: 20px;
      background: var(--text);
      transition: left 0.3s;
    }

    .breakeven-label {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.25rem;
      text-align: right;
    }

    .verdict {
      margin-top: 0.75rem;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      font-weight: 600;
      text-align: center;
      font-size: 0.95rem;
    }

    .verdict.pslf-wins {
      background: var(--accent-light);
      color: var(--accent);
    }

    .verdict.private-wins {
      background: #fef3c7;
      color: #92400e;
    }

    @media (max-width: 600px) {
      .metrics, .comparison-grid {
        grid-template-columns: 1fr;
      }
      .form-grid {
        grid-template-columns: 1fr;
      }
      .salary-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
      }
      .salary-input {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <h1>Medical School Debt Optimizer</h1>
  <p class="subtitle">Compare repayment strategies and find your optimal path</p>
  
  <form id="calculator">
    <div class="card">
      <h2>Loan Information</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="totalDebt">Total Loan Balance ($)</label>
          <input type="number" id="totalDebt" value="250000" min="0" step="any">
        </div>
        <div class="form-group">
          <label for="interestRate">Weighted Interest Rate (%)</label>
          <input type="number" id="interestRate" value="6.5" min="0" max="15" step="0.1">
        </div>
        <div class="form-group">
          <label for="pslfPayments">PSLF Qualifying Payments Made</label>
          <input type="number" id="pslfPayments" value="0" min="0" max="120">
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Career Information</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="specialty">Specialty</label>
          <select id="specialty"></select>
        </div>
        <div class="form-group">
          <label for="currentStage">Current Training Stage</label>
          <select id="currentStage">
            <option value="ms4">MS4 (4th year med student)</option>
            <option value="pgy1" selected>PGY-1 (Intern)</option>
            <option value="pgy2">PGY-2</option>
            <option value="pgy3">PGY-3</option>
            <option value="pgy4">PGY-4</option>
            <option value="pgy5">PGY-5</option>
            <option value="pgy6">PGY-6+</option>
            <option value="fellow">Fellow</option>
            <option value="attending">Attending</option>
          </select>
        </div>
        <div class="form-group checkbox-group">
          <input type="checkbox" id="pslfEligible">
          <label for="pslfEligible">PSLF-Eligible Employer</label>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Personal Information</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="agi">Current AGI ($)</label>
          <input type="number" id="agi" value="65000" min="0" step="1000">
        </div>
        <div class="form-group">
          <label for="familySize">Family Size</label>
          <input type="number" id="familySize" value="1" min="1" max="10">
        </div>
        <div class="form-group">
          <label for="filingStatus">Filing Status</label>
          <select id="filingStatus">
            <option value="single" selected>Single</option>
            <option value="mfj">Married Filing Jointly</option>
            <option value="mfs">Married Filing Separately</option>
          </select>
        </div>
        <div class="form-group">
          <label for="spouseAgi">Spouse AGI ($)</label>
          <input type="number" id="spouseAgi" value="0" min="0" step="1000">
        </div>
        <div class="form-group">
          <label for="state">State</label>
          <select id="state"></select>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h2>Preferences</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="discountRate">Discount Rate (%)</label>
          <input type="number" id="discountRate" value="5" min="0" max="15" step="0.5">
        </div>
        <div class="form-group">
          <label for="pslfConfidence">PSLF Confidence (%)</label>
          <input type="number" id="pslfConfidence" value="85" min="0" max="100" step="5">
        </div>
        <div class="form-group checkbox-group">
          <input type="checkbox" id="saveAvailable">
          <label for="saveAvailable">SAVE Plan Available</label>
        </div>
      </div>
      
      <div class="toggle-section">
        <div class="toggle-header">
          <input type="checkbox" id="aggressivePayoff">
          <label for="aggressivePayoff"><strong>Model aggressive payoff strategy</strong></label>
        </div>
        <div class="toggle-content" id="aggressiveContent">
          <p class="inline-form">
            As an attending, I'll live on 
            <span style="display: inline-flex; align-items: center;">$<input type="number" id="livingExpenses" value="80000" min="30000" max="200000" step="5000"></span>
            per year for 
            <select id="aggressiveYears">
              <option value="1">1 year</option>
              <option value="2">2 years</option>
              <option value="3" selected>3 years</option>
              <option value="4">4 years</option>
              <option value="5">5 years</option>
            </select>
            after finishing training.
          </p>
          <p class="inline-form" style="margin-top: 0.5rem;">
            Expected refinance rate: 
            <span style="display: inline-flex; align-items: center;"><input type="number" id="aggressiveRefiRate" value="5.5" min="3" max="10" step="0.25">%</span>
          </p>
          <p class="explanation">
            This models the "live like a resident" strategy. Surplus income (after taxes and living expenses) goes toward loans. 
            After the aggressive period, you'll make standard amortized payments on any remaining balance.
          </p>
        </div>
      </div>
    </div>
    
    <button type="submit">Calculate Optimal Strategy</button>
  </form>
  
  <div id="results">
    <div class="card recommendation-box">
      <h3>
        Recommended: <span id="recommendedStrategy"></span>
        <span id="confidence" class="confidence"></span>
      </h3>
      <div class="metrics">
        <div class="metric">
          <div class="metric-value" id="dtiRatio"></div>
          <div class="metric-label">Debt-to-Income</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="savings"></div>
          <div class="metric-label">Savings vs Refi</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="forgiveness"></div>
          <div class="metric-label">Net Forgiveness</div>
        </div>
      </div>
      <ul class="reasoning" id="reasoning"></ul>
      <p class="explanation" id="explanationText"></p>
      <button type="button" class="share-button" id="shareButton">
        üìã Copy link to these results
      </button>
    </div>
    
    <!-- Career Path Comparison (shown when PSLF + aggressive payoff both active) -->
    <div class="card" id="careerPathComparison" style="display: none;">
      <h3>Career Path Comparison</h3>
      <p id="careerPathDescription">Compare your financial trajectory under two career paths.</p>

      <div class="comparison-grid">
        <!-- Path A: PSLF -->
        <div class="comparison-item path-card" id="pathPSLF">
          <div class="path-header pslf">Path A: PSLF Route</div>
          <div class="path-subtitle">Academic / Non-Profit</div>
          <div class="path-metrics">
            <div class="path-metric">
              <span class="path-metric-label">Repayment</span>
              <span class="path-metric-value" id="pslfPathPlan"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Total Cost (NPV)</span>
              <span class="path-metric-value" id="pslfPathNPV"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Timeline</span>
              <span class="path-metric-value" id="pslfPathTimeline"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Monthly Payment</span>
              <span class="path-metric-value" id="pslfPathMonthly"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Forgiveness</span>
              <span class="path-metric-value" id="pslfPathForgiveness"></span>
            </div>
          </div>
        </div>

        <!-- Path B: Private Practice -->
        <div class="comparison-item path-card" id="pathPrivate">
          <div class="path-header private">Path B: Private Practice</div>
          <div class="path-subtitle">Aggressive Payoff</div>
          <div class="path-metrics">
            <div class="path-metric">
              <span class="path-metric-label">Repayment</span>
              <span class="path-metric-value" id="privatePathPlan"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Total Cost (NPV)</span>
              <span class="path-metric-value" id="privatePathNPV"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Timeline</span>
              <span class="path-metric-value" id="privatePathTimeline"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Monthly Payment</span>
              <span class="path-metric-value" id="privatePathMonthly"></span>
            </div>
            <div class="path-metric">
              <span class="path-metric-label">Forgiveness</span>
              <span class="path-metric-value" id="privatePathForgiveness"></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Salary Comparison -->
      <div class="salary-comparison" id="salaryComparisonSection">
        <h4>Salary Comparison</h4>
        <div class="salary-row">
          <label>PSLF-eligible salary (median):</label>
          <span class="salary-value" id="pslfSalaryDisplay"></span>
        </div>
        <div class="salary-row">
          <label for="privateSalaryInput">Private practice offer:</label>
          <input type="text" id="privateSalaryInput" class="salary-input" placeholder="Enter salary">
        </div>
        <div class="breakeven-container">
          <div class="breakeven-bar">
            <div class="breakeven-fill" id="breakevenFill"></div>
            <div class="breakeven-marker" id="breakevenMarker"></div>
          </div>
          <div class="breakeven-label" id="breakevenLabel">Breakeven: loading...</div>
        </div>
        <div class="verdict" id="verdictBox">
          <span class="verdict-text" id="verdictText"></span>
        </div>
      </div>

      <p class="explanation" id="careerPathExplanation"></p>
    </div>

    <!-- Fallback: standalone PSLF premium (shown when no aggressive payoff) -->
    <div class="card" id="pslfPremiumCard" style="display: none;">
      <h3>PSLF Salary Premium Analysis</h3>
      <p id="pslfPremiumDescription"></p>
      <div class="metrics">
        <div class="metric">
          <div class="metric-value" id="pslfPremiumAnnual"></div>
          <div class="metric-label">Min. Additional Salary Needed</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="pslfPremiumMonthly"></div>
          <div class="metric-label">Per Month</div>
        </div>
        <div class="metric">
          <div class="metric-value" id="pslfPremiumBenefit"></div>
          <div class="metric-label">PSLF Net Present Value Benefit</div>
        </div>
      </div>
      <p class="explanation" id="pslfPremiumExplanation"></p>
    </div>

    <!-- Fallback: standalone aggressive payoff (shown when no PSLF) -->
    <div class="card aggressive-results" id="aggressiveResults" style="display: none;">
      <h4>Aggressive Payoff Scenario</h4>
      <p id="aggressiveDescription"></p>
      <div class="comparison-grid">
        <div class="comparison-item" id="aggressiveItem">
          <div class="comparison-label">Aggressive Payoff</div>
          <div class="comparison-value" id="aggressiveNPV"></div>
          <div class="comparison-label" id="aggressiveTime"></div>
        </div>
        <div class="comparison-item" id="bestStrategyItem">
          <div class="comparison-label" id="bestStrategyLabel">Best Other Strategy</div>
          <div class="comparison-value" id="bestStrategyNPV"></div>
          <div class="comparison-label" id="bestStrategyTime"></div>
        </div>
      </div>
      <p class="explanation" id="aggressiveExplanation"></p>
    </div>
    
    <div class="card">
      <h2>Strategy Comparison</h2>
      <table>
        <thead>
          <tr>
            <th>Strategy</th>
            <th>Total Paid</th>
            <th>Forgiven</th>
            <th>Tax</th>
            <th>Net Present Value</th>
            <th>Years</th>
          </tr>
        </thead>
        <tbody id="resultsTable"></tbody>
      </table>
    </div>
  </div>
  
  <footer class="footer">
    <div class="footer-links">
      <a href="/methodology.html">Methodology & Assumptions</a>
      <a href="https://github.com/frontalcluster/med-debt-optimizer" target="_blank">Source Code</a>
    </div>
    <p>
      <strong>Disclaimer:</strong> This tool provides estimates for educational purposes only. 
      It is not financial, tax, or legal advice. Loan calculations involve assumptions that may not 
      reflect your actual situation. Consult a qualified financial advisor before making decisions 
      about your student loans.
    </p>
    <p class="last-updated">
      Last updated: February 2025. Data sources: HHS Poverty Guidelines (2024), IRS Tax Brackets (2024), 
      Medscape Physician Compensation Report (2024), Federal Student Aid.
    </p>
  </footer>
  
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
